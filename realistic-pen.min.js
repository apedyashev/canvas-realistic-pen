function RealisticPen(a,b){function c(a,b){function c(){var a;for(i.lineWidth=q.brushSize,i.strokeStyle="rgba("+q.penColor[0]+", "+q.penColor[1]+", "+q.penColor[2]+",  "+q.brushPressure+")",a=0;a<l.length;a++)i.beginPath(),i.moveTo(l[a].dx,l[a].dy),l[a].dx-=l[a].ax=(l[a].ax+(l[a].dx-j)*l[a].div)*l[a].ease,l[a].dy-=l[a].ay=(l[a].ay+(l[a].dy-k)*l[a].div)*l[a].ease,i.lineTo(l[a].dx,l[a].dy),i.stroke()}var d=a.parentNode;b&&(q=h(q,b)),a.width=d.offsetWidth?d.offsetWidth:o,a.height=d.offsetHeight?d.offsetHeight:p,n=a,i=n.getContext("2d"),g(),i.globalCompositeOperation="source-over",j=n.width/2,k=n.height/2,l=[];for(var e=0;e<q.brushesCount;e++)l.push({dx:n.width/2,dy:n.height/2,ax:0,ay:0,div:.1,ease:.5+.005*e});m=setInterval(c,1e3/60)}function d(a,b){j=a,k=b;for(var c=0;c<l.length;c++)l[c].dx=a,l[c].dy=b}function e(a,b){j=a,k=b}function f(){}function g(){var a=function(a){d(a.pageX-n.offsetLeft,a.pageY-n.offsetTop),n.addEventListener("mousemove",b,!1),n.addEventListener("mouseup",c,!1)},b=function(a){e(a.pageX-n.offsetLeft,a.pageY-n.offsetTop)},c=function(){f(),n.removeEventListener("mousemove",b,!1),n.removeEventListener("mouseup",c,!1)},g=function(a){1==a.touches.length&&(a.preventDefault(),d(a.touches[0].pageX,a.touches[0].pageY),n.addEventListener("touchmove",h,!1),n.addEventListener("touchend",i,!1))},h=function(a){1==a.touches.length&&(a.preventDefault(),e(a.touches[0].pageX,a.touches[0].pageY))},i=function(a){0===a.touches.length&&(a.preventDefault(),f(),n.removeEventListener("touchmove",h,!1),n.removeEventListener("touchend",i,!1))};n.addEventListener("mousedown",a,!1),n.addEventListener("touchstart",g,!1)}function h(a,b){var c,d;a||(a={}),b||(b={});for(c in b)d=b[c],a[c]=d;return a}var i=null,j=null,k=null,l=null,m=null,n=null,o=200,p=200,q={penColor:[0,0,0],brushPressure:1,brushSize:3,brushesCount:4};this.destroy=function(){clearInterval(m)},c(a,b)}